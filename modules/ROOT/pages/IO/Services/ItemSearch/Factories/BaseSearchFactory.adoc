:table-caption!:
:example-caption!:
:source-highlighter: prettify
:sectids!:
[[io__basesearchfactory]]
= BaseSearchFactory

Base factory to build elastic search requests.

[WARNING]
.Deprecated! 
====

since 5.0.0 will be deleted in 6.0.0

====


===== Namespace

`IO\Services\ItemSearch\Factories`





.Properties
|===
|Type |Name |Description

|link:http://php.net/array[array^]
    |aggregations
    |
|link:http://php.net/array[array^]
    |mutators
    |
|link:http://php.net/array[array^]
    |filters
    |
|link:http://php.net/array[array^]
    |resultFields
    |
|link:http://php.net/array[array^]
    |filterInstances
    |
|link:http://php.net/array[array^]
    |extensions
    |
|link:http://php.net/string[string^]
    |collapseField
    |
| xref:stable7@interface::Cloud.adoc#cloud_sorting_multiplesorting[`MultipleSorting`]
    |sorting
    |
| xref:stable7@interface::Cloud.adoc#cloud_scoremodifier_randomscore[`RandomScore`]
    |randomScoreModifier
    |
|link:http://php.net/int[int^]
    |page
    |
|link:http://php.net/int[int^]
    |itemsPerPage
    |
|link:http://php.net/string[string^]
    |pluginNamespace
    |
|===


===== Methods

[source%nowrap, php]
----

public inherit($searchBuilder, $inheritedProperties = []):IO\Services\ItemSearch\Factories\BaseSearchFactory

----

[WARNING]
.Deprecated! 
====

since 5.0.0 will be deleted in 6.0.0

====



====== *Return type:*xref:IO/Services/ItemSearch/Factories/BaseSearchFactory.adoc#[`BaseSearchFactory`]


Create a new factory instance based on properties of an existing factory.

.*Parameters*
|===
|Type |Name |Description
|xref:IO/Services/ItemSearch/Factories/BaseSearchFactory.adoc#[`BaseSearchFactory`]
a|`$searchBuilder`
|The search factory to inherit properties from.

|link:http://php.net/array[array^]
a|`$inheritedProperties`
|List of properties to inherit or null to inherit all properties.
|===


[source%nowrap, php]
----

public withMutator($mutator):IO\Services\ItemSearch\Factories

----

[WARNING]
.Deprecated! 
====

since 5.0.0 will be deleted in 6.0.0

====



====== *Return type:*xref:IO/Services/ItemSearch/Factories.adoc#[`Factories`]


Add a mutator

.*Parameters*
|===
|Type |Name |Description
| xref:stable7@interface::Cloud.adoc#cloud_mutator_mutatorinterface[`MutatorInterface`]
a|`$mutator`
|
|===


[source%nowrap, php]
----

public createFilter($filterClass):Plenty\Modules\Cloud\ElasticSearch\Lib\Query\Type\TypeInterface

----

[WARNING]
.Deprecated! 
====

since 5.0.0 will be deleted in 6.0.0

====



====== *Return type:* xref:stable7@interface::Cloud.adoc#cloud_type_typeinterface[`TypeInterface`]


Add a filter. Will create a new instance of the filter class if not already created.

.*Parameters*
|===
|Type |Name |Description
|link:http://php.net/string[string^]
a|`$filterClass`
|
|===


[source%nowrap, php]
----

public withFilter($filter):IO\Services\ItemSearch\Factories

----

[WARNING]
.Deprecated! 
====

since 5.0.0 will be deleted in 6.0.0

====



====== *Return type:*xref:IO/Services/ItemSearch/Factories.adoc#[`Factories`]


Add a filter. Will override existing filter instances.

.*Parameters*
|===
|Type |Name |Description
| xref:stable7@interface::Cloud.adoc#cloud_type_typeinterface[`TypeInterface`]
a|`$filter`
|
|===


[source%nowrap, php]
----

public withResultFields($fields):IO\Services\ItemSearch\Factories\BaseSearchFactory

----

[WARNING]
.Deprecated! 
====

since 5.0.0 will be deleted in 6.0.0

====



====== *Return type:*xref:IO/Services/ItemSearch/Factories/BaseSearchFactory.adoc#[`BaseSearchFactory`]


Set fields to be contained in search result.

.*Parameters*
|===
|Type |Name |Description
| 
a|`$fields`
|Reference to a json file to load fields from or a list of field names.
|===


[source%nowrap, php]
----

public getResultFields():array

----

[WARNING]
.Deprecated! 
====

since 5.0.0 will be deleted in 6.0.0

====








[source%nowrap, php]
----

public withExtension($extensionClass, $extensionParams = []):IO\Services\ItemSearch\Factories

----

[WARNING]
.Deprecated! 
====

since 5.0.0 will be deleted in 6.0.0

====



====== *Return type:*xref:IO/Services/ItemSearch/Factories.adoc#[`Factories`]


Add an extension.

.*Parameters*
|===
|Type |Name |Description
|link:http://php.net/string[string^]
a|`$extensionClass`
|Extension class to add.

|link:http://php.net/array[array^]
a|`$extensionParams`
|Additional parameters to pass to extensions constructor
|===


[source%nowrap, php]
----

public getExtensions():array

----

[WARNING]
.Deprecated! 
====

since 5.0.0 will be deleted in 6.0.0

====






Get all registered extensions

[source%nowrap, php]
----

public withAggregation($aggregation):IO\Services\ItemSearch\Factories

----

[WARNING]
.Deprecated! 
====

since 5.0.0 will be deleted in 6.0.0

====



====== *Return type:*xref:IO/Services/ItemSearch/Factories.adoc#[`Factories`]


Add an aggregation

.*Parameters*
|===
|Type |Name |Description
| xref:stable7@interface::Cloud.adoc#cloud_aggregation_aggregationinterface[`AggregationInterface`]
a|`$aggregation`
|
|===


[source%nowrap, php]
----

public setPage($page, $itemsPerPage):IO\Services\ItemSearch\Factories

----

[WARNING]
.Deprecated! 
====

since 5.0.0 will be deleted in 6.0.0

====



====== *Return type:*xref:IO/Services/ItemSearch/Factories.adoc#[`Factories`]


Set pagination parameters.

.*Parameters*
|===
|Type |Name |Description
|link:http://php.net/int[int^]
a|`$page`
|

|link:http://php.net/int[int^]
a|`$itemsPerPage`
|
|===


[source%nowrap, php]
----

public sortBy($field, $order = \Plenty\Modules\Webshop\ItemSearch\Factories\VariationSearchFactory::SORTING_ORDER_DESC):IO\Services\ItemSearch\Factories

----

[WARNING]
.Deprecated! 
====

since 5.0.0 will be deleted in 6.0.0

====



====== *Return type:*xref:IO/Services/ItemSearch/Factories.adoc#[`Factories`]


Add sorting parameters

.*Parameters*
|===
|Type |Name |Description
|link:http://php.net/string[string^]
a|`$field`
|The field to order by

|link:http://php.net/string[string^]
a|`$order`
|Direction to order results. Possible values: 'asc' or 'desc'
|===


[source%nowrap, php]
----

public sortByMultiple($sortingList):IO\Services\ItemSearch\Factories

----

[WARNING]
.Deprecated! 
====

since 5.0.0 will be deleted in 6.0.0

====



====== *Return type:*xref:IO/Services/ItemSearch/Factories.adoc#[`Factories`]


Add multiple sorting parameters

.*Parameters*
|===
|Type |Name |Description
|link:http://php.net/array[array^]
a|`$sortingList`
|List of sorting parameters. Each entry should have a 'field' and an 'order' property.
|===


[source%nowrap, php]
----

public setOrder($idList):IO\Services\ItemSearch\Factories

----

[WARNING]
.Deprecated! 
====

since 5.0.0 will be deleted in 6.0.0

====



====== *Return type:*xref:IO/Services/ItemSearch/Factories.adoc#[`Factories`]




.*Parameters*
|===
|Type |Name |Description
|link:http://php.net/array[array^]
a|`$idList`
|
|===


[source%nowrap, php]
----

public groupBy($field):IO\Services\ItemSearch\Factories

----

[WARNING]
.Deprecated! 
====

since 5.0.0 will be deleted in 6.0.0

====



====== *Return type:*xref:IO/Services/ItemSearch/Factories.adoc#[`Factories`]


Group results by field

.*Parameters*
|===
|Type |Name |Description
|link:http://php.net/string[string^]
a|`$field`
|The field to group properties by.
|===


[source%nowrap, php]
----

public build():Plenty\Modules\Cloud\ElasticSearch\Lib\Search\Document\DocumentSearch

----

[WARNING]
.Deprecated! 
====

since 5.0.0 will be deleted in 6.0.0

====



====== *Return type:* xref:stable7@interface::Cloud.adoc#cloud_document_documentsearch[`DocumentSearch`]


Build the elastic search request.

[source%nowrap, php]
----

public prepareSearch($source):Plenty\Modules\Cloud\ElasticSearch\Lib\Search\Document\DocumentSearch

----

[WARNING]
.Deprecated! 
====

since 5.0.0 will be deleted in 6.0.0

====



====== *Return type:* xref:stable7@interface::Cloud.adoc#cloud_document_documentsearch[`DocumentSearch`]


Build the search instance itself. May be overridden by concrete factories.

.*Parameters*
|===
|Type |Name |Description
| xref:stable7@interface::Cloud.adoc#cloud_source_includesource[`IncludeSource`]
a|`$source`
|
|===


