:table-caption!:
:example-caption!:
:source-highlighter: prettify
:sectids!:
[[io__orderservice]]
= OrderService





===== Namespace

`IO\Services`




.Constants
|===
|Type |Name |Value |Description

|link:http://php.net/array[array^]
    |WRAPPED_ORDERITEM_TYPES
    |[1,2,3,9]
    |
|link:http://php.net/array[array^]
    |VISIBLE_ORDER_TYPES
    |[1,5]
    |
|===


.Properties
|===
|Type |Name |Description

| xref:stable7@interface::Order.adoc#order_contracts_orderrepositorycontract[`OrderRepositoryContract`]
    |orderRepository
    |
|xref:IO/Services/BasketService.adoc#[`BasketService`]
    |basketService
    |
|xref:IO/Services/SessionStorageService.adoc#[`SessionStorageService`]
    |sessionStorage
    |
| xref:stable7@interface::Frontend.adoc#frontend_contracts_frontendpaymentmethodrepositorycontract[`FrontendPaymentMethodRepositoryContract`]
    |frontendPaymentMethodRepository
    |
| xref:stable7@interface::Account.adoc#account_contracts_addressrepositorycontract[`AddressRepositoryContract`]
    |addressRepository
    |
|xref:IO/Services/UrlService.adoc#[`UrlService`]
    |urlService
    |
|xref:IO/Services/CheckoutService.adoc#[`CheckoutService`]
    |checkoutService
    |
|xref:IO/Services/CustomerService.adoc#[`CustomerService`]
    |customerService
    |
|link:http://php.net/string[string^]
    |pluginNamespace
    |
|===


===== Methods

[source%nowrap, php]
----

public __construct($orderRepository, $basketService, $sessionStorage, $frontendPaymentMethodRepository, $addressRepository, $urlService, $checkoutService, $customerService):void

----







OrderService constructor.

.*Parameters*
|===
|Type |Name |Description
| xref:stable7@interface::Order.adoc#order_contracts_orderrepositorycontract[`OrderRepositoryContract`]
a|`$orderRepository`
|

|xref:IO/Services/BasketService.adoc#[`BasketService`]
a|`$basketService`
|

|xref:IO/Services/IO/Services/SessionStorageService.adoc#[`SessionStorageService`]
a|`$sessionStorage`
|

| xref:stable7@interface::Frontend.adoc#frontend_contracts_frontendpaymentmethodrepositorycontract[`FrontendPaymentMethodRepositoryContract`]
a|`$frontendPaymentMethodRepository`
|

| xref:stable7@interface::Account.adoc#account_contracts_addressrepositorycontract[`AddressRepositoryContract`]
a|`$addressRepository`
|

|xref:IO/Services/IO/Services/UrlService.adoc#[`UrlService`]
a|`$urlService`
|

|xref:IO/Services/IO/Services/CheckoutService.adoc#[`CheckoutService`]
a|`$checkoutService`
|

|xref:IO/Services/IO/Services/CustomerService.adoc#[`CustomerService`]
a|`$customerService`
|
|===


[source%nowrap, php]
----

public placeOrder():IO\Models\LocalizedOrder

----




====== *Return type:*xref:IO/Models/LocalizedOrder.adoc#[`LocalizedOrder`]


Place an order

[source%nowrap, php]
----

public executePayment($orderId, $paymentId):array

----







Execute the payment for a given order.

.*Parameters*
|===
|Type |Name |Description
|link:http://php.net/int[int^]
a|`$orderId`
|The order id to execute payment for

|link:http://php.net/int[int^]
a|`$paymentId`
|The MoP-ID to execute
|===


[source%nowrap, php]
----

public findOrderById($orderId, $wrap = true):void

----







Find an order by ID

.*Parameters*
|===
|Type |Name |Description
|link:http://php.net/int[int^]
a|`$orderId`
|

|link:http://php.net/bool[bool^]
a|`$wrap`
|
|===


[source%nowrap, php]
----

public findOrderByAccessKey():void

----









[source%nowrap, php]
----

public getOrdersForContact($contactId, $page = 1, $items = 50, $filters = [], $wrapped = true):Plenty\Repositories\Models\PaginatedResult

----




====== *Return type:* xref:stable7@interface::Miscellaneous.adoc#miscellaneous_models_paginatedresult[`PaginatedResult`]


Get a list of orders for a contact

.*Parameters*
|===
|Type |Name |Description
|link:http://php.net/int[int^]
a|`$contactId`
|

|link:http://php.net/int[int^]
a|`$page`
|

|link:http://php.net/int[int^]
a|`$items`
|

|link:http://php.net/array[array^]
a|`$filters`
|

|link:http://php.net/bool[bool^]
a|`$wrapped`
|
|===


[source%nowrap, php]
----

public getOrdersCompact():void

----









[source%nowrap, php]
----

public getLatestOrderForContact($contactId):IO\Models\LocalizedOrder

----




====== *Return type:*xref:IO/Models/LocalizedOrder.adoc#[`LocalizedOrder`]


Get the last order created by the current contact

.*Parameters*
|===
|Type |Name |Description
|link:http://php.net/int[int^]
a|`$contactId`
|
|===


[source%nowrap, php]
----

public getOrderPropertyByOrderId():void

----









[source%nowrap, php]
----

public isReturnActive():void

----









[source%nowrap, php]
----

public createOrderReturn():void

----









[source%nowrap, php]
----

public getReturnableItems($order):array

----









.*Parameters*
|===
|Type |Name |Description
| xref:stable7@interface::Order.adoc#order_models_order[`Order`]
a|`$order`
|
|===


[source%nowrap, php]
----

public getPaymentMethodListForSwitch($currentPaymentMethodId, $orderId = null):IO\Services\Illuminate\Support\Collection

----




====== *Return type:*xref:IO/Services/Illuminate/Support/Collection.adoc#[`Collection`]


List all payment methods available for switch in MyAccount

.*Parameters*
|===
|Type |Name |Description
|link:http://php.net/int[int^]
a|`$currentPaymentMethodId`
|

| null
a|`$orderId`
|
|===


[source%nowrap, php]
----

public complete($order):void

----







Do steps after creating the order

.*Parameters*
|===
|Type |Name |Description
| xref:stable7@interface::Order.adoc#order_models_order[`Order`]
a|`$order`
|
|===


